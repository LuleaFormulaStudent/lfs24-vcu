<?xml version="1.0"?>
<mavlink>

    <include>common.xml</include>
    <!-- <version>9</version> -->
    <dialect>8</dialect>

    <enums>
        <enum name="DRIVING_MODE">
            <description>A enum that is not being used</description>
            <entry value="0" name="NEUTRAL">
                <description>In neutral driving mode</description>
            </entry>
            <entry value="1" name="FORWARD">
                <description>In forward driving mode</description>
            </entry>
            <entry value="2" name="REVERSE">
                <description>In reverse driving mode</description>
            </entry>
        </enum>
    </enums>

    <enum name="MAV_CMD">
        <description>Commands to be executed by the VCU.</description>
        <entry value="50000" name="MAV_CMD_DO_SET_COOLANT_PUMP">
            <description>Navigate to waypoint.</description>
            <param index="1">Start or stop the coolant pump</param>
            <param index="2">Set startup behavior, 0 = not change, 1 = Off, 2 = On</param>
        </entry>
        <entry value="50001" name="MAV_CMD_DO_SET_DRIVING_MODE">
            <description>Navigate to waypoint.</description>
            <param index="1">Set driving mode using enum DRIVING_MODE</param>
        </entry>
    </enum>

    <messages>
        <!-- Messages are defined here (optional) -->
        <message id="50000" name="THROTTLE_DATA">
            <description>Handles throttle data, both raw and parsed.</description>
            <field type="uint8_t" name="raw" units="">Raw input value from adc</field>
            <field type="float" name="input" units="percent">Parsed input value</field>
            <field type="float" name="output" units="percent">Calculated output value</field>
        </message>
        <message id="50001" name="BRAKE_DATA">
            <description>Handles brake data, both raw and parsed.</description>
            <field type="uint8_t" name="raw" units="">Raw input value from adc</field>
            <field type="float" name="input" units="percent">Parsed input value</field>
            <field type="float" name="output" units="percent">Calculated output value</field>
        </message>
        <message id="50002" name="DRIVING_MODE_MESSAGE">
            <description>Describes the current driving mode</description>
            <field type="uint8_t" name="driving_mode" enum="DRIVING_MODE">Current driving mode</field>
        </message>
        <message id="50003" name="VEHICLE_DATA">
            <description>Message with the most common vehicle data.</description>
            <field type="float" name="power" units="kW">The power the vehicle is using</field>
            <field type="float" name="speed" units="km/h">The total current speed of the vehicle</field>
            <field type="float" name="heading" units="degrees">The current heading the vehicle</field>
            <field type="float" name="steering" units="degrees">The current steering angle</field>
        </message>
        <message id="50004" name="COOLANT_PUMP">
            <description>Information about the coolant pump state and values</description>
            <field type="uint8_t" name="state">Current state of the coolant pump, 0 = Off and 1 = On</field>
            <field type="uint8_t" name="startup_state">Describes if the coolant pump should start on startup or not, 0 = Off and 1 = On</field>
            <field type="float" name="flow" units="l/h">The flow in the system, -1 if not used</field>
            <field type="uint32_t" name="pressure" units="Pa">The absolute pressure in the system</field>
            <field type="uint16_t" name="temp_1" units="cDeg">Temperature at one point in the system</field>
            <field type="uint16_t" name="temp_2" units="cDeg">Temperature at one point in the system</field>
        </message>
        <message id="50005" name="COMPUTER_STATUS">
            <description>Hardware status of the onboard computer.</description>
            <field type="uint32_t" name="uptime" units="ms">Describes if the coolant pump should start on startup or not, 0 = Off and 1 = On</field>
            <field type="uint8_t" name="type">Type of the onboard computer: 0: Mission computer primary, 1: Mission computer backup 1, 2: Mission computer backup 2, 3: Compute node, 4-5: Compute spares, 6-9: Payload computers.</field>
            <field type="uint8_t" name="cpu_core">CPU usage on the component in percent (100 - idle). A value of UINT8_MAX implies the field is unused.</field>
            <field type="uint8_t" name="gpu_core" units="cDeg">GPU usage on the component in percent (100 - idle). A value of UINT8_MAX implies the field is unused.</field>
            <field type="uint16_t" name="temperature_board" units="cDegC">Temperature of the board. A value of INT16_MAX implies the field is unused.</field>
            <field type="uint16_t" name="temperature_core" units="cDegC">Temperature of the CPU core. A value of INT16_MAX implies the field is unused.</field>
            <field type="uint32_t" name="ram_usage" units="MiB">Amount of used RAM on the component system. A value of UINT32_MAX implies the field is unused.</field>
            <field type="uint32_t" name="ram_total" units="MiB">Total amount of RAM on the component system. A value of UINT32_MAX implies the field is unused.</field>
            <field type="uint32_t" name="storage_type" units="MiB">Storage type: 0: HDD, 1: SSD, 2: EMMC, 3: SD card (non-removable), 4: SD card (removable). A value of UINT32_MAX implies the field is unused.</field>
            <field type="uint32_t" name="storage_usage" units="MiB">Amount of used storage space on the component system. A value of UINT32_MAX implies the field is unused.</field>
            <field type="uint32_t" name="storage_total" units="MiB">Total amount of storage space on the component system. A value of UINT32_MAX implies the field is unused.</field>
        </message>
    </messages>
</mavlink>